<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boomi Component Dependency Diagram</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background-color: #0078d4;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .section {
            background-color: white;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        h1, h2 {
            margin-top: 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        
        th {
            background-color: #f2f2f2;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        #diagram {
            width: 100%;
            height: 600px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
            position: relative;
        }
        
        .node {
            cursor: move;
        }
        
        .node rect {
            stroke: #1d3557;
            stroke-width: 2px;
        }
        
        .isolated-node rect {
            fill: #fcefef;
            stroke: #e63946;
        }
        
        .node text {
            font-size: 12px;
            text-anchor: middle;
            dominant-baseline: middle;
        }
        
        .link {
            fill: none;
            stroke: #999;
            stroke-width: 1.5px;
            marker-end: url(#arrowhead);
        }
        
        .buttons {
            margin-bottom: 15px;
        }
        
        button {
            padding: 8px 15px;
            margin-right: 10px;
            border: none;
            border-radius: 4px;
            background-color: #0078d4;
            color: white;
            cursor: pointer;
        }
        
        button:hover {
            background-color: #005a9e;
        }
        
        .legend {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border: 1px solid #000;
        }
        
        .import-export {
            margin-top: 20px;
        }
        
        #fileInput {
            display: none;
        }
        
        .file-input-label {
            padding: 8px 15px;
            border-radius: 4px;
            background-color: #4caf50;
            color: white;
            cursor: pointer;
            display: inline-block;
        }
        
        .file-input-label:hover {
            background-color: #3e8e41;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 5px;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: black;
        }
        
        .search-container {
            margin-bottom: 15px;
        }
        
        #searchInput {
            padding: 8px;
            width: 250px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .layout-buttons {
            display: flex;
            gap: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Boomi Component Dependency Report</h1>
        </div>
        
        <div class="section">
            <h2>Diagram</h2>
            <div class="controls">
                <div class="buttons">
                    <button id="resetBtn">Reset View</button>
                    <button id="toggleIsolatedBtn">Toggle Isolated Components</button>
                </div>
                <div class="layout-buttons">
                    <button id="applyHierarchicalLayoutBtn">Hierarchical Layout</button>
                    <button id="applyCircleLayoutBtn">Circle Layout</button>
                    <button id="applyForceLayoutBtn">Auto Arrange</button>
                </div>
            </div>
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search components...">
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #E9A2A2;"></div>
                    <span>Isolated Component (No References)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #A5D6A7;"></div>
                    <span>Process</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #90CAF9;"></div>
                    <span>Connector</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #FFCC80;"></div>
                    <span>Connector Operation</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #DD858E;"></div>
                    <span>Profile</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #646165;"></div>
                    <span>Mapping</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #81726A;"></div>
                    <span>Cache</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #60695C;"></div>
                    <span>Supplementals</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #ffffff;"></div>
                    <span>Regular Component</span>
                </div>
            </div>
            <div id="diagram"></div>
        </div>
        
        <div class="section">
            <h2>Isolated Components</h2>
            <p>Components that neither reference nor are referenced by other components:</p>
            <table id="isolatedTable">
                <thead>
                    <tr>
                        <th>Component Name</th>
                        <th>Type</th>
                        <th>Path</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Isolated components will be listed here -->
                </tbody>
            </table>
        </div>
        
        <div class="section import-export">
            <h2>Import/Export Data</h2>
            <button id="importBtnTrigger">Import Component Data</button>
            <input type="file" id="fileInput" accept=".json" style="display: none;">
            <button id="exportDataBtn">Export Component Data</button>
        </div>
    </div>
    
    <div id="componentModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modalTitle">Component Details</h2>
            <div id="modalContent"></div>
        </div>
    </div>
    
    <script>
        // Sample data structure - replace this with your actual data from Boomi
        let sampleData = {
            components: [
				{id: "0e599be0-dc4e-4c5f-babc-d8c2f0e9f70a", name: "[TazWorks RSI] Get Client Product GUID from Order Type", type: "transform.function", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "19e79d57-1d29-4ba2-b7bc-d139b59a4109", name: "Create TazWorks Applicant, License & Order", type: "processroute", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "1ac9f2ad-ba51-4c2d-a791-fa1a704dde02", name: "[Main] TazWorks RSI Order Event Received", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "2a04bd67-fd75-459e-aea5-966d2096f891", name: "[sub] Write Error Message to LMPrivateDetail", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "2d9cd17e-4021-4721-941f-036ba57b3a92", name: "[Salesforce -> TazWorks RSI] Get and Clean Error Messages for LMPrivateDetail__c", type: "transform.function", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "309160b3-6cf3-4467-b800-ee74bd525cb6", name: "[TazWorks RSI] GET Order Results PDF Response", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "30dba863-9e12-4054-940c-f27e93d7e06b", name: "[YLGlobal] TazWorksCBCandDQSync CREATE Request", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "343f1602-6303-42d0-932d-8d2dc9646c9c", name: "[TazWorks RSI] Submit Order Responses", type: "documentcache", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "37898921-19e9-437b-be80-9362cba76d9a", name: "[YLGlobal] TazWorksCBCandDQSync INSERT Request", type: "connector-action", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "39e31cd1-7eef-4fa3-8ab6-0bf0d5ac24f7", name: "[Salesforce -> TazWorks RSI] Build Salesforce LMPrivateDetail Error Message Update Request", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "3d1fb22e-089d-4396-98c8-0f42364f2638", name: "[YLGlobal] TazWorksCBCandDQSync CREATE Response", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "40ee7773-f446-40c3-acd5-e641fbafde8a", name: "[sub] TazWorks POST Endpoint", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "43ffc623-89c7-4cd8-b5d0-f8418367e8c2", name: "[Salesforce -> TazWorks RSI] Build Update Applicant Request", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "467bce4c-f800-4a8f-bd89-73081fc32399", name: "[Salesforce -> TazWorks RSI] Determine if YL API Update Needed", type: "transform.function", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "47d423cd-9f68-42ff-9372-b3a443ffaa6e", name: "[TazWorks RSI] Client Product GUID and Order Types", type: "crossref", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "481664cb-7079-4c5b-b908-189061618180", name: "[Salesforce -> TazWorks RSI] Build PUT Update/POST Create License Request", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "4a030f22-e0d0-4068-be50-866575f6ecff", name: "[sub] TazWorks PUT Endpoint", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "4dde725c-e4ef-4666-9f55-9a8828509b5a", name: "[sub] Get and Cache Existing YL API User", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "4fbbae4f-369f-4057-8f85-fdb3f0678e9b", name: "[sub] Create TazWorks Applicant with License & Address", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "50b896e6-c02c-435e-842f-f125290a42f0", name: "[Tazworks RSI] Order Result to CLAM Status", type: "crossref", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "531361fc-c539-4ed4-ab86-2e31733b430d", name: "[TazWorks RSI] Applicant Response", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "54b11388-a78d-4500-9a4a-b4a0a78d3c62", name: "[test] RSI Order Status to Salesforce LMPrivateDetail", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "55aff38e-98be-418e-b609-254eff94d385", name: "[TazWorks RSI] Single Order", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "582898a0-03ca-4892-8d32-a939deb1e548", name: "[sub] Update YL API User with PII", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "5e595a10-009e-4ab2-ae0b-da4796decf99", name: "[TazWorks RSI] PUT/POST Update/Create License REQUEST", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "6a20cf3e-e86c-4c59-a838-f8404200518f", name: "[YL API] User GET Responses", type: "documentcache", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "7068e20f-6d91-4448-83c7-de9f9a500eab", name: "[TazWorks RSI] Create Applicant with Details Request", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "7a3ac2be-7021-4965-a738-f2ba12a6d238", name: "[WebSvc] TazWorks RSI Webhook Listener", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "7b63e82d-d391-41aa-815f-99e826d1be65", name: "[Salesforce -> TazWorks RSI] Build YL API User Update Request", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "80f6163f-ef9d-41d8-9b58-b36cb0f2916a", name: "[CBC & DQ] Determine if Salesforce SSN is Valid", type: "transform.function", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "81da01ae-bf52-4da0-adfd-9e436f307750", name: "[TazWorks RSI] Submit Order Response", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "849732eb-87b9-4e17-8f5f-51873d905dbf", name: "[TazWorks -> Salesforce] Order Result to CLAM Status", type: "transform.function", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "8d78e4cb-251f-4f00-821c-435ba1c27cb7", name: "[Integrations Audit Table Logging] Combine DPP_ALL_ERROR_MESSAGES", type: "transform.function", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "921184bc-320a-470f-8599-2e33ef7e6bf6", name: "[sub] TazWorks GET Endpoint", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "94fdcf3d-6cbb-4829-b895-7c76fec92dac", name: "[sub] Insert CBC & DQ Audit Table Record", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "9938f9d2-8868-487f-a461-f13b5e316c49", name: "[Main] TazWorks RSI Create Applicant, License & Order", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "9e7c82e2-6e4d-4321-ae1a-fd6127d9d650", name: "[TazWorks RSI] Submit Order Request", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "9f73b85c-8ad8-4cd8-afb6-8511434a462d", name: "[sub] Update TazWorks Applicant & Upsert License", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "ae0041dc-0433-48e3-bf8d-edda6a948644", name: "[Salesforce -> TazWorks RSI] Build Create Applicant Request", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "b85186d1-c8fe-4632-aa72-8044b4cafca4", name: "[TazWorks RSI] Get correct SSN for Applicant", type: "transform.function", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "b8b51523-8c44-4e67-a1b8-82a310843dcb", name: "[sub] Update Salesforce Private Detail from Taz Order Status", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a", name: "[Salesforce] CBC and DQ Platform Events Canonical", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "bb664e58-afe9-4bab-afa4-666332b6f4b8", name: "[TazWorks RSI] Webhook message", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "bb911148-ae10-4e40-8e10-6e48f4fb3b94", name: "[sub] Create TazWorks Order & Update LMPrivateDetail", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "bf01bd1b-1b21-4aac-82f0-ba7644d5e6e1", name: "[Salesforce -> TazWorks RSI] Build TazWorks Submit Order Request", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "c2f115b0-22f9-43b7-a734-b836c9c9a3ea", name: "[Salesforce -> TazWorks RSI] Set LMPrivateDetail Status to Pending-Awaiting Vendor", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "c9009dec-4789-4ddc-b6bf-fc8b21a8783d", name: "TazWorks RSI Integration Properties", type: "processproperty", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "cde625c9-9665-422f-8658-ade00c28a971", name: "[CBC & DQ] Build TazWorksCBCandDQSync Create Request", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "d71f8db8-03e0-4542-94e9-a5c10b57d893", name: "[TazWorks RSI] License Response", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "daf03835-afc5-460c-8894-deb845472b5c", name: "RSI Order Event Received Route", type: "processroute", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "e209fda8-880f-4800-b6bd-51d6e2073b1a", name: "[Salesforce -> TazWorks RSI] Add TazWorks orderGuid to LMPrivate Detail", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "e2bdf020-9dda-4363-80a3-6461e11d1bbd", name: "[sub] Get Existing TazWorks Applicant and Details", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "f37e77cc-36ab-4e51-a096-cc8d76604950", name: "[Salesforce -> TazWorks] Use Test Process Prop SSN", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations"},
{id: "0adf5043-4778-4195-a2c1-0bb41ec74b9f", name: "[Salesforce -> TazWorks RSI] CBC Order Requested Event Bus to Canonical", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check"},
{id: "8097df72-2b54-44fb-9826-54d784138f9d", name: "[Salesforce Platform Events] CBC Order Requested LISTEN Response", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check"},
{id: "ff0dcd2e-c321-47e1-baff-7e94667badb8", name: "[WebSvc] CBC Order Requested Event Listener", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check"},
{id: "0008dfb1-5bd0-4d1a-8c2e-e37ce8cb4c0c", name: "[Salesforce Platform Events] DQ Order Requested LISTEN Response", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire"},
{id: "596b56e0-74cc-4cab-b7c5-e48a103d3dc8", name: "[TazWorks RSI -> Salesforce] RSI Order Status & PDF Link to LMPrivateDetail", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire"},
{id: "67e7e5d5-4c61-43ed-adb1-15c2581fdd59", name: "[Salesforce -> TazWorks RSI] DQ Order Requested Event Bus to Canonical", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire"},
{id: "72da8af9-b371-4d9d-bbba-4208f20a2985", name: "[WebSvc] DQ Order Requested Event Listener", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire"},
{id: "0e8caec3-e15d-415e-8748-5ec94dae69cc", name: "[CLAM] CBC Request", type: "connector-action", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "15994c83-5a4a-44e5-8d78-9719eb0c0f15", name: "[Main] CBC Response Received", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "2b906404-28d3-41ff-b0fa-08619113a6ec", name: "[json] CBC Request (Response)", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "32c4dfaa-2328-4c85-9b4a-c63dfda43e44", name: "[Main] CBC Request", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "32d65a5e-24ea-473d-9152-ff7bfd9c1ac9", name: "[YL API] CBC & DQ Intake Request", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "64001045-9122-4189-869f-0e4c78c31a87", name: "[test] main CBC Request", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "69f838dc-ac17-4649-a2a5-fb93715f1c98", name: "[SOAP] SubmitCBC Request", type: "profile.xml", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "7b13f408-a33e-4e0e-ad04-fcc9e136c6c9", name: "[sub] .NET CBC Request", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "970c3b15-14f2-40bf-946a-7d145e9688b1", name: "[SOAP] Build CBC Error Message", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "a07a8c1f-bd8b-44c8-968e-3b6ed9d4fd4b", name: "[YL apps SOAP] CriminalBackgroundCheck", type: "connector-settings", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "ae83ce5e-76a3-4b13-8bc2-a9984b1dd091", name: "[Salesforce -> YL API] CBC & DQ Listener Payload to API Request", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "c5e652a6-e195-4c8d-9d0a-adc5836a8a63", name: "[SOAP] CBC to [JSON] Submit CBC Response", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "d1b275fa-d5da-4379-903e-b235f6804b72", name: "[SOAP] SubmitCBC Response", type: "profile.xml", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "ddc95d7a-8d9c-4030-8011-8a1989302baa", name: "[Web Svc] CBC Request", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "e75280b6-5af4-4d62-b136-cf35be8006ce", name: "[SOAP] CBC Request", type: "connector-action", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "e7b9df90-afcf-47b8-8ef8-09657a75c866", name: "[JSON] CBC Listener Payload", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "ed3285f0-cff8-46a4-82f4-f1300e641539", name: "[JSON CBC] -> [.NET CBC] Request", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Criminal Background Check/zOLD"},
{id: "3f34efad-c5ca-4f68-9d72-69825c30b2e8", name: "CBC_DQ Status update to SF", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire/zOLD"},
{id: "44e81a38-1f6f-4aab-bba8-b21d6d6c8927", name: "New Map", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire/zOLD"},
{id: "73129645-9912-43db-a105-1d358fb91d3c", name: "[Salesforce]SF_LMTracker Query Response", type: "connector-action", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire/zOLD"},
{id: "7d53de70-4794-4340-800c-1b2cf3e0d4d4", name: "[Clam] Execute DQ Request", type: "connector-action", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire/zOLD"},
{id: "8f85c90a-ed8a-4b0e-81d4-968b5a820eaa", name: "SF_LMTracker__c_QUERY_Response 2", type: "profile.xml", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire/zOLD"},
{id: "93622971-d5be-46db-901d-cb8a4cfe85c9", name: "SF_LMTracker__c_QUERY_Response", type: "profile.xml", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire/zOLD"},
{id: "b5ebd1dc-a40a-4c04-b7cc-cd974202b84b", name: "cbc_dq status update response", type: "connector-action", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire/zOLD"},
{id: "d0eec5e9-fde9-41e8-9b74-745bf9093afd", name: "[Salesforce] DQ Listener Payload ", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire/zOLD"},
{id: "f094b795-6fcd-4a3a-b826-2898ea12531f", name: "CBC & DQ Status Update Response", type: "profile.json", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire/zOLD"},
{id: "f0af27e1-6c2b-4aba-b9d0-ae36fd1e906a", name: "[Web Svc] DQ Request", type: "process", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire/zOLD"},
{id: "f257c46e-df7c-433e-a6a5-dd52e3f49bbd", name: "CBC_DQ Status Update to SF PrivateDetails", type: "transform.map", path: "YL/zCLAM Integrations Development/CBC & DQ Integrations/Driver Questionnaire/zOLD"},
{id: "702aa116-d243-4660-a815-5399d72277f6", name: "Boomi Environment and Container Information", type: "crossref", path: "null"},
{id: "08067b65-bc76-4c61-bd2d-1f86adee8c6d", name: "[Salesforce] integrationuser - SET BY EXTENSIONS", type: "connector-settings", path: "null"},
{id: "0ed9a92c-b810-4843-9da4-b61d10f63d6d", name: "Error Message Cache", type: "documentcache", path: "null"},
{id: "8a0a8752-0404-43e4-8b2a-1d94cc135478", name: "[Salesforce] LMPrivateDetail__c UPDATE Request", type: "profile.xml", path: "null"},
{id: "3a7d1068-689d-4262-978b-0a9e9e625abd", name: "Default Error Handling Proccess Route", type: "processroute", path: "null"},
{id: "b534ada2-ec21-4e77-8b91-147827846443", name: "Build Error Information JSON", type: "transform.map", path: "null"},
{id: "e47aeba2-78b3-4f23-8011-c3373bf43306", name: "[Salesforce] LMPrivateDetail__c UPDATE", type: "connector-action", path: "null"},
{id: "f48c6407-bea8-4782-954a-a9e6497f8cac", name: "CONST Global Values", type: "processproperty", path: "null"},
{id: "c623e734-6386-46e4-bffd-fe53f2fd7699", name: "[Salesforce] SOQL Query", type: "process", path: "null"},
{id: "531f981f-0dd2-4c8f-9ee6-0c560ab971f8", name: "[RSI TazWorks] POST JSON Endpoint", type: "connector-action", path: "null"},
{id: "f3ec4bd4-eba3-400d-b7da-8aec2763f8a1", name: "TazWorks RSI - SET BY EXTENSIONS", type: "connector-settings", path: "null"},
{id: "69e2c41e-fe60-4dc6-bb68-3ed863939024", name: "[Common] IIF Map Function", type: "transform.function", path: "null"},
{id: "b158f41c-4194-4f65-a1b4-061506cf076b", name: "[RSI TazWorks] PUT JSON Endpoint", type: "connector-action", path: "null"},
{id: "3881a032-b547-4a84-8776-cd4404942aaf", name: "States by Country", type: "crossref", path: "null"},
{id: "4bc9191b-0a16-4454-8ea4-60e4dfa9ab55", name: "[sub] YL API GET JSON Endpoint", type: "process", path: "null"},
{id: "ecb9ac90-8b31-458b-81c4-93d6d7b0bc3c", name: "[TazWorks RSI] GET Single Order", type: "connector-action", path: "null"},
{id: "4e602003-01df-44a4-9e23-8c4e3627d01f", name: "[sub] YL API PUT JSON Endpoint", type: "process", path: "null"},
{id: "45c2fd3c-e57d-407d-8481-fe8ed50da52b", name: "[YL API] User Payload", type: "profile.json", path: "null"},
{id: "81fbc653-e1b3-404d-992e-f187d5f01ed3", name: "[TazWorks RSI] Webhook Listener", type: "connector-action", path: "null"},
{id: "f9006ca5-5016-41b2-a7ca-ab8fb1ef611f", name: "[Moodle -> Salesforce] Build YLGlobal Audit Table Insert Request", type: "transform.map", path: "null"},
{id: "b0ca5d1e-1379-4d34-b5fa-e7033e6b5820", name: "[RSI TazWorks] GET JSON Endpoint", type: "connector-action", path: "null"},
{id: "7dfbe045-b021-4912-b1bf-7be8dd477e13", name: "[AWS RDS] YLGlobal integrationuser - SET BY EXTENSIONS", type: "connector-settings", path: "null"},
{id: "3a42dcef-73a7-414c-927e-062c757aa9eb", name: "Error Information Canonical", type: "profile.json", path: "null"},
{id: "d500ba3b-b122-4a71-99ea-485f16c91e79", name: "[Salesforce] LMPrivateDetail__c QUERY", type: "connector-action", path: "null"},
{id: "07174fb0-5802-486c-8b2c-00f1525c7a68", name: "[Common] Single Value", type: "profile.flatfile", path: "null"},
{id: "46894edb-141b-440c-aae1-209a524a2714", name: "[Salesforce] LMPrivateDetail__c QUERY Response", type: "profile.xml", path: "null"},
{id: "d5631e4a-39fa-4e11-aa8c-8cc22b1f40c8", name: "[WebSvc] Salesforce Prehire Course Completion Event Listener", type: "process", path: "null"},
{id: "f9d2a4af-17e4-4366-b073-e8914b153067", name: "CBC Order Requested", type: "connector-action", path: "null"},
{id: "aa9935ab-4cb0-4f0c-a752-69409961c378", name: "Salesforce Platform Events Connection", type: "connector-settings", path: "null"},
{id: "6837cfd5-5aa9-456e-97fa-7e660822656e", name: "DQ Order Requested", type: "connector-action", path: "null"},
{id: "be119ea2-4755-4d95-931d-e54f40974dd2", name: "[CLAM] Common Process Properties", type: "processproperty", path: "null"},
{id: "3b19af81-03c5-449a-8b72-231992849064", name: "Query LMPivateDetail Records from SF", type: "process", path: "null"},
{id: "5edc0297-7e93-4f53-bcc9-8f9628e98226", name: "[Web Svc] Moodle Course Completion to Salesforce", type: "process", path: "null"},
{id: "46f0c60d-da51-489d-a17e-c3987776cb4d", name: "Moodle awaiting status to SF LMTracker", type: "transform.map", path: "null"},
{id: "79496b1c-4581-4017-9e7a-ea874fecd54f", name: "Moodle Input to SF LMTracker ", type: "transform.map", path: "null"},
{id: "9aa448c2-f121-4aea-81cd-a9ccbcab0a3f", name: "Moodle NeedsReview COI G to SF LMTracker", type: "transform.map", path: "null"},
{id: "9bfb7eb3-f284-41c6-906f-2e74072bfb68", name: "Map Moodle awaiting update status to SF  ", type: "transform.map", path: "null"},
{id: "aa4c5b6a-07b4-405b-add8-22608ce2496f", name: "Moodle NeedsReview status MOcto SF LMTracker", type: "transform.map", path: "null"},
{id: "c496de77-bfd1-4ba9-92cf-643aa232c55d", name: "Moodle NeedsReview COI Status to SF LMTracker", type: "transform.map", path: "null"},
{id: "39a4b5f7-5124-469a-9347-ee10f292726a", name: "[Moodle -> Salesforce] Set LMPrivateDetail__c Status = "Complete"", type: "transform.map", path: "null"},

            ],
            references: [
				{source: "0e599be0-dc4e-4c5f-babc-d8c2f0e9f70a", target: "47d423cd-9f68-42ff-9372-b3a443ffaa6e"},
{source: "0e599be0-dc4e-4c5f-babc-d8c2f0e9f70a", target: "702aa116-d243-4660-a815-5399d72277f6"},
{source: "bf01bd1b-1b21-4aac-82f0-ba7644d5e6e1", target: "0e599be0-dc4e-4c5f-babc-d8c2f0e9f70a"},
{source: "19e79d57-1d29-4ba2-b7bc-d139b59a4109", target: "9938f9d2-8868-487f-a461-f13b5e316c49"},
{source: "72da8af9-b371-4d9d-bbba-4208f20a2985", target: "19e79d57-1d29-4ba2-b7bc-d139b59a4109"},
{source: "ff0dcd2e-c321-47e1-baff-7e94667badb8", target: "19e79d57-1d29-4ba2-b7bc-d139b59a4109"},
{source: "1ac9f2ad-ba51-4c2d-a791-fa1a704dde02", target: "08067b65-bc76-4c61-bd2d-1f86adee8c6d"},
{source: "1ac9f2ad-ba51-4c2d-a791-fa1a704dde02", target: "0ed9a92c-b810-4843-9da4-b61d10f63d6d"},
{source: "1ac9f2ad-ba51-4c2d-a791-fa1a704dde02", target: "309160b3-6cf3-4467-b800-ee74bd525cb6"},
{source: "1ac9f2ad-ba51-4c2d-a791-fa1a704dde02", target: "3a7d1068-689d-4262-978b-0a9e9e625abd"},
{source: "1ac9f2ad-ba51-4c2d-a791-fa1a704dde02", target: "596b56e0-74cc-4cab-b7c5-e48a103d3dc8"},
{source: "1ac9f2ad-ba51-4c2d-a791-fa1a704dde02", target: "8a0a8752-0404-43e4-8b2a-1d94cc135478"},
{source: "1ac9f2ad-ba51-4c2d-a791-fa1a704dde02", target: "921184bc-320a-470f-8599-2e33ef7e6bf6"},
{source: "1ac9f2ad-ba51-4c2d-a791-fa1a704dde02", target: "b534ada2-ec21-4e77-8b91-147827846443"},
{source: "1ac9f2ad-ba51-4c2d-a791-fa1a704dde02", target: "bb664e58-afe9-4bab-afa4-666332b6f4b8"},
{source: "1ac9f2ad-ba51-4c2d-a791-fa1a704dde02", target: "c9009dec-4789-4ddc-b6bf-fc8b21a8783d"},
{source: "1ac9f2ad-ba51-4c2d-a791-fa1a704dde02", target: "e47aeba2-78b3-4f23-8011-c3373bf43306"},
{source: "1ac9f2ad-ba51-4c2d-a791-fa1a704dde02", target: "f48c6407-bea8-4782-954a-a9e6497f8cac"},
{source: "daf03835-afc5-460c-8894-deb845472b5c", target: "1ac9f2ad-ba51-4c2d-a791-fa1a704dde02"},
{source: "2a04bd67-fd75-459e-aea5-966d2096f891", target: "08067b65-bc76-4c61-bd2d-1f86adee8c6d"},
{source: "2a04bd67-fd75-459e-aea5-966d2096f891", target: "0ed9a92c-b810-4843-9da4-b61d10f63d6d"},
{source: "2a04bd67-fd75-459e-aea5-966d2096f891", target: "39e31cd1-7eef-4fa3-8ab6-0bf0d5ac24f7"},
{source: "2a04bd67-fd75-459e-aea5-966d2096f891", target: "8a0a8752-0404-43e4-8b2a-1d94cc135478"},
{source: "2a04bd67-fd75-459e-aea5-966d2096f891", target: "b534ada2-ec21-4e77-8b91-147827846443"},
{source: "2a04bd67-fd75-459e-aea5-966d2096f891", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "2a04bd67-fd75-459e-aea5-966d2096f891", target: "e47aeba2-78b3-4f23-8011-c3373bf43306"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "2a04bd67-fd75-459e-aea5-966d2096f891"},
{source: "39e31cd1-7eef-4fa3-8ab6-0bf0d5ac24f7", target: "2d9cd17e-4021-4721-941f-036ba57b3a92"},
{source: "94fdcf3d-6cbb-4829-b895-7c76fec92dac", target: "30dba863-9e12-4054-940c-f27e93d7e06b"},
{source: "cde625c9-9665-422f-8658-ade00c28a971", target: "30dba863-9e12-4054-940c-f27e93d7e06b"},
{source: "bb911148-ae10-4e40-8e10-6e48f4fb3b94", target: "343f1602-6303-42d0-932d-8d2dc9646c9c"},
{source: "94fdcf3d-6cbb-4829-b895-7c76fec92dac", target: "37898921-19e9-437b-be80-9362cba76d9a"},
{source: "39e31cd1-7eef-4fa3-8ab6-0bf0d5ac24f7", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "343f1602-6303-42d0-932d-8d2dc9646c9c", target: "81da01ae-bf52-4da0-adfd-9e436f307750"},
{source: "39e31cd1-7eef-4fa3-8ab6-0bf0d5ac24f7", target: "8a0a8752-0404-43e4-8b2a-1d94cc135478"},
{source: "37898921-19e9-437b-be80-9362cba76d9a", target: "30dba863-9e12-4054-940c-f27e93d7e06b"},
{source: "37898921-19e9-437b-be80-9362cba76d9a", target: "3d1fb22e-089d-4396-98c8-0f42364f2638"},
{source: "40ee7773-f446-40c3-acd5-e641fbafde8a", target: "531f981f-0dd2-4c8f-9ee6-0c560ab971f8"},
{source: "40ee7773-f446-40c3-acd5-e641fbafde8a", target: "c9009dec-4789-4ddc-b6bf-fc8b21a8783d"},
{source: "40ee7773-f446-40c3-acd5-e641fbafde8a", target: "f3ec4bd4-eba3-400d-b7da-8aec2763f8a1"},
{source: "9f73b85c-8ad8-4cd8-afb6-8511434a462d", target: "40ee7773-f446-40c3-acd5-e641fbafde8a"},
{source: "bb911148-ae10-4e40-8e10-6e48f4fb3b94", target: "40ee7773-f446-40c3-acd5-e641fbafde8a"},
{source: "43ffc623-89c7-4cd8-b5d0-f8418367e8c2", target: "69e2c41e-fe60-4dc6-bb68-3ed863939024"},
{source: "43ffc623-89c7-4cd8-b5d0-f8418367e8c2", target: "7068e20f-6d91-4448-83c7-de9f9a500eab"},
{source: "43ffc623-89c7-4cd8-b5d0-f8418367e8c2", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "4fbbae4f-369f-4057-8f85-fdb3f0678e9b", target: "40ee7773-f446-40c3-acd5-e641fbafde8a"},
{source: "9f73b85c-8ad8-4cd8-afb6-8511434a462d", target: "43ffc623-89c7-4cd8-b5d0-f8418367e8c2"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "47d423cd-9f68-42ff-9372-b3a443ffaa6e"},
{source: "481664cb-7079-4c5b-b908-189061618180", target: "3881a032-b547-4a84-8776-cd4404942aaf"},
{source: "481664cb-7079-4c5b-b908-189061618180", target: "5e595a10-009e-4ab2-ae0b-da4796decf99"},
{source: "481664cb-7079-4c5b-b908-189061618180", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "9f73b85c-8ad8-4cd8-afb6-8511434a462d", target: "481664cb-7079-4c5b-b908-189061618180"},
{source: "4a030f22-e0d0-4068-be50-866575f6ecff", target: "b158f41c-4194-4f65-a1b4-061506cf076b"},
{source: "4a030f22-e0d0-4068-be50-866575f6ecff", target: "c9009dec-4789-4ddc-b6bf-fc8b21a8783d"},
{source: "4a030f22-e0d0-4068-be50-866575f6ecff", target: "f3ec4bd4-eba3-400d-b7da-8aec2763f8a1"},
{source: "9f73b85c-8ad8-4cd8-afb6-8511434a462d", target: "4a030f22-e0d0-4068-be50-866575f6ecff"},
{source: "4dde725c-e4ef-4666-9f55-9a8828509b5a", target: "0ed9a92c-b810-4843-9da4-b61d10f63d6d"},
{source: "4dde725c-e4ef-4666-9f55-9a8828509b5a", target: "67e7e5d5-4c61-43ed-adb1-15c2581fdd59"},
{source: "4dde725c-e4ef-4666-9f55-9a8828509b5a", target: "6a20cf3e-e86c-4c59-a838-f8404200518f"},
{source: "4dde725c-e4ef-4666-9f55-9a8828509b5a", target: "b534ada2-ec21-4e77-8b91-147827846443"},
{source: "4dde725c-e4ef-4666-9f55-9a8828509b5a", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "4fbbae4f-369f-4057-8f85-fdb3f0678e9b", target: "0ed9a92c-b810-4843-9da4-b61d10f63d6d"},
{source: "4fbbae4f-369f-4057-8f85-fdb3f0678e9b", target: "3a42dcef-73a7-414c-927e-062c757aa9eb"},
{source: "4dde725c-e4ef-4666-9f55-9a8828509b5a", target: "4bc9191b-0a16-4454-8ea4-60e4dfa9ab55"},
{source: "4fbbae4f-369f-4057-8f85-fdb3f0678e9b", target: "531361fc-c539-4ed4-ab86-2e31733b430d"},
{source: "4fbbae4f-369f-4057-8f85-fdb3f0678e9b", target: "7068e20f-6d91-4448-83c7-de9f9a500eab"},
{source: "4fbbae4f-369f-4057-8f85-fdb3f0678e9b", target: "ae0041dc-0433-48e3-bf8d-edda6a948644"},
{source: "4fbbae4f-369f-4057-8f85-fdb3f0678e9b", target: "b534ada2-ec21-4e77-8b91-147827846443"},
{source: "4fbbae4f-369f-4057-8f85-fdb3f0678e9b", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "4fbbae4f-369f-4057-8f85-fdb3f0678e9b"},
{source: "849732eb-87b9-4e17-8f5f-51873d905dbf", target: "50b896e6-c02c-435e-842f-f125290a42f0"},
{source: "e2bdf020-9dda-4363-80a3-6461e11d1bbd", target: "531361fc-c539-4ed4-ab86-2e31733b430d"},
{source: "54b11388-a78d-4500-9a4a-b4a0a78d3c62", target: "596b56e0-74cc-4cab-b7c5-e48a103d3dc8"},
{source: "54b11388-a78d-4500-9a4a-b4a0a78d3c62", target: "8a0a8752-0404-43e4-8b2a-1d94cc135478"},
{source: "ecb9ac90-8b31-458b-81c4-93d6d7b0bc3c", target: "55aff38e-98be-418e-b609-254eff94d385"},
{source: "582898a0-03ca-4892-8d32-a939deb1e548", target: "0ed9a92c-b810-4843-9da4-b61d10f63d6d"},
{source: "582898a0-03ca-4892-8d32-a939deb1e548", target: "3a42dcef-73a7-414c-927e-062c757aa9eb"},
{source: "582898a0-03ca-4892-8d32-a939deb1e548", target: "4bc9191b-0a16-4454-8ea4-60e4dfa9ab55"},
{source: "582898a0-03ca-4892-8d32-a939deb1e548", target: "4e602003-01df-44a4-9e23-8c4e3627d01f"},
{source: "582898a0-03ca-4892-8d32-a939deb1e548", target: "6a20cf3e-e86c-4c59-a838-f8404200518f"},
{source: "582898a0-03ca-4892-8d32-a939deb1e548", target: "7b63e82d-d391-41aa-815f-99e826d1be65"},
{source: "596b56e0-74cc-4cab-b7c5-e48a103d3dc8", target: "55aff38e-98be-418e-b609-254eff94d385"},
{source: "582898a0-03ca-4892-8d32-a939deb1e548", target: "b534ada2-ec21-4e77-8b91-147827846443"},
{source: "582898a0-03ca-4892-8d32-a939deb1e548", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "582898a0-03ca-4892-8d32-a939deb1e548"},
{source: "9f73b85c-8ad8-4cd8-afb6-8511434a462d", target: "5e595a10-009e-4ab2-ae0b-da4796decf99"},
{source: "6a20cf3e-e86c-4c59-a838-f8404200518f", target: "45c2fd3c-e57d-407d-8481-fe8ed50da52b"},
{source: "7b63e82d-d391-41aa-815f-99e826d1be65", target: "6a20cf3e-e86c-4c59-a838-f8404200518f"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "6a20cf3e-e86c-4c59-a838-f8404200518f"},
{source: "ae0041dc-0433-48e3-bf8d-edda6a948644", target: "6a20cf3e-e86c-4c59-a838-f8404200518f"},
{source: "ae0041dc-0433-48e3-bf8d-edda6a948644", target: "7068e20f-6d91-4448-83c7-de9f9a500eab"},
{source: "7a3ac2be-7021-4965-a738-f2ba12a6d238", target: "81fbc653-e1b3-404d-992e-f187d5f01ed3"},
{source: "7a3ac2be-7021-4965-a738-f2ba12a6d238", target: "bb664e58-afe9-4bab-afa4-666332b6f4b8"},
{source: "7a3ac2be-7021-4965-a738-f2ba12a6d238", target: "daf03835-afc5-460c-8894-deb845472b5c"},
{source: "7b63e82d-d391-41aa-815f-99e826d1be65", target: "45c2fd3c-e57d-407d-8481-fe8ed50da52b"},
{source: "7b63e82d-d391-41aa-815f-99e826d1be65", target: "80f6163f-ef9d-41d8-9b58-b36cb0f2916a"},
{source: "7b63e82d-d391-41aa-815f-99e826d1be65", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "e209fda8-880f-4800-b6bd-51d6e2073b1a", target: "81da01ae-bf52-4da0-adfd-9e436f307750"},
{source: "596b56e0-74cc-4cab-b7c5-e48a103d3dc8", target: "849732eb-87b9-4e17-8f5f-51873d905dbf"},
{source: "cde625c9-9665-422f-8658-ade00c28a971", target: "8d78e4cb-251f-4f00-821c-435ba1c27cb7"},
{source: "f9006ca5-5016-41b2-a7ca-ab8fb1ef611f", target: "8d78e4cb-251f-4f00-821c-435ba1c27cb7"},
{source: "921184bc-320a-470f-8599-2e33ef7e6bf6", target: "b0ca5d1e-1379-4d34-b5fa-e7033e6b5820"},
{source: "921184bc-320a-470f-8599-2e33ef7e6bf6", target: "c9009dec-4789-4ddc-b6bf-fc8b21a8783d"},
{source: "921184bc-320a-470f-8599-2e33ef7e6bf6", target: "f3ec4bd4-eba3-400d-b7da-8aec2763f8a1"},
{source: "e2bdf020-9dda-4363-80a3-6461e11d1bbd", target: "921184bc-320a-470f-8599-2e33ef7e6bf6"},
{source: "94fdcf3d-6cbb-4829-b895-7c76fec92dac", target: "0ed9a92c-b810-4843-9da4-b61d10f63d6d"},
{source: "94fdcf3d-6cbb-4829-b895-7c76fec92dac", target: "3a42dcef-73a7-414c-927e-062c757aa9eb"},
{source: "94fdcf3d-6cbb-4829-b895-7c76fec92dac", target: "7dfbe045-b021-4912-b1bf-7be8dd477e13"},
{source: "94fdcf3d-6cbb-4829-b895-7c76fec92dac", target: "b534ada2-ec21-4e77-8b91-147827846443"},
{source: "94fdcf3d-6cbb-4829-b895-7c76fec92dac", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "94fdcf3d-6cbb-4829-b895-7c76fec92dac", target: "cde625c9-9665-422f-8658-ade00c28a971"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "0adf5043-4778-4195-a2c1-0bb41ec74b9f"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "0ed9a92c-b810-4843-9da4-b61d10f63d6d"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "3a42dcef-73a7-414c-927e-062c757aa9eb"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "3a7d1068-689d-4262-978b-0a9e9e625abd"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "67e7e5d5-4c61-43ed-adb1-15c2581fdd59"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "702aa116-d243-4660-a815-5399d72277f6"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "94fdcf3d-6cbb-4829-b895-7c76fec92dac"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "b534ada2-ec21-4e77-8b91-147827846443"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "bb911148-ae10-4e40-8e10-6e48f4fb3b94"},
{source: "9938f9d2-8868-487f-a461-f13b5e316c49", target: "c9009dec-4789-4ddc-b6bf-fc8b21a8783d"},
{source: "bf01bd1b-1b21-4aac-82f0-ba7644d5e6e1", target: "9e7c82e2-6e4d-4321-ae1a-fd6127d9d650"},
{source: "9f73b85c-8ad8-4cd8-afb6-8511434a462d", target: "0ed9a92c-b810-4843-9da4-b61d10f63d6d"},
{source: "9f73b85c-8ad8-4cd8-afb6-8511434a462d", target: "b534ada2-ec21-4e77-8b91-147827846443"},
{source: "9f73b85c-8ad8-4cd8-afb6-8511434a462d", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "9f73b85c-8ad8-4cd8-afb6-8511434a462d", target: "d71f8db8-03e0-4542-94e9-a5c10b57d893"},
{source: "ae0041dc-0433-48e3-bf8d-edda6a948644", target: "3881a032-b547-4a84-8776-cd4404942aaf"},
{source: "ae0041dc-0433-48e3-bf8d-edda6a948644", target: "69e2c41e-fe60-4dc6-bb68-3ed863939024"},
{source: "ae0041dc-0433-48e3-bf8d-edda6a948644", target: "b85186d1-c8fe-4632-aa72-8044b4cafca4"},
{source: "ae0041dc-0433-48e3-bf8d-edda6a948644", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "b85186d1-c8fe-4632-aa72-8044b4cafca4", target: "c9009dec-4789-4ddc-b6bf-fc8b21a8783d"},
{source: "b8b51523-8c44-4e67-a1b8-82a310843dcb", target: "08067b65-bc76-4c61-bd2d-1f86adee8c6d"},
{source: "b8b51523-8c44-4e67-a1b8-82a310843dcb", target: "596b56e0-74cc-4cab-b7c5-e48a103d3dc8"},
{source: "b8b51523-8c44-4e67-a1b8-82a310843dcb", target: "8a0a8752-0404-43e4-8b2a-1d94cc135478"},
{source: "b8b51523-8c44-4e67-a1b8-82a310843dcb", target: "e47aeba2-78b3-4f23-8011-c3373bf43306"},
{source: "0adf5043-4778-4195-a2c1-0bb41ec74b9f", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "67e7e5d5-4c61-43ed-adb1-15c2581fdd59", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "c2f115b0-22f9-43b7-a734-b836c9c9a3ea", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "cde625c9-9665-422f-8658-ade00c28a971", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "e2bdf020-9dda-4363-80a3-6461e11d1bbd", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "f37e77cc-36ab-4e51-a096-cc8d76604950", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "81fbc653-e1b3-404d-992e-f187d5f01ed3", target: "bb664e58-afe9-4bab-afa4-666332b6f4b8"},
{source: "bb911148-ae10-4e40-8e10-6e48f4fb3b94", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "bf01bd1b-1b21-4aac-82f0-ba7644d5e6e1", target: "ba801b9d-b369-4b38-8bf5-0b4c2375f72a"},
{source: "bb911148-ae10-4e40-8e10-6e48f4fb3b94", target: "08067b65-bc76-4c61-bd2d-1f86adee8c6d"},
{source: "bb911148-ae10-4e40-8e10-6e48f4fb3b94", target: "0ed9a92c-b810-4843-9da4-b61d10f63d6d"},
{source: "bb911148-ae10-4e40-8e10-6e48f4fb3b94", target: "3a42dcef-73a7-414c-927e-062c757aa9eb"},
{source: "bb911148-ae10-4e40-8e10-6e48f4fb3b94", target: "8a0a8752-0404-43e4-8b2a-1d94cc135478"},
{source: "bb911148-ae10-4e40-8e10-6e48f4fb3b94", target: "c2f115b0-22f9-43b7-a734-b836c9c9a3ea"},
{source: "bb911148-ae10-4e40-8e10-6e48f4fb3b94", target: "e209fda8-880f-4800-b6bd-51d6e2073b1a"},
{source: "bb911148-ae10-4e40-8e10-6e48f4fb3b94", target: "e47aeba2-78b3-4f23-8011-c3373bf43306"},
{source: "bb911148-ae10-4e40-8e10-6e48f4fb3b94", target: "b534ada2-ec21-4e77-8b91-147827846443"},
{source: "bb911148-ae10-4e40-8e10-6e48f4fb3b94", target: "bf01bd1b-1b21-4aac-82f0-ba7644d5e6e1"},
{source: "c2f115b0-22f9-43b7-a734-b836c9c9a3ea", target: "8a0a8752-0404-43e4-8b2a-1d94cc135478"},
{source: "72da8af9-b371-4d9d-bbba-4208f20a2985", target: "c9009dec-4789-4ddc-b6bf-fc8b21a8783d"},
{source: "f37e77cc-36ab-4e51-a096-cc8d76604950", target: "c9009dec-4789-4ddc-b6bf-fc8b21a8783d"},
{source: "ff0dcd2e-c321-47e1-baff-7e94667badb8", target: "c9009dec-4789-4ddc-b6bf-fc8b21a8783d"},
{source: "e209fda8-880f-4800-b6bd-51d6e2073b1a", target: "8a0a8752-0404-43e4-8b2a-1d94cc135478"},
{source: "e2bdf020-9dda-4363-80a3-6461e11d1bbd", target: "0ed9a92c-b810-4843-9da4-b61d10f63d6d"},
{source: "e2bdf020-9dda-4363-80a3-6461e11d1bbd", target: "b534ada2-ec21-4e77-8b91-147827846443"},
{source: "0adf5043-4778-4195-a2c1-0bb41ec74b9f", target: "8097df72-2b54-44fb-9826-54d784138f9d"},
{source: "ff0dcd2e-c321-47e1-baff-7e94667badb8", target: "0adf5043-4778-4195-a2c1-0bb41ec74b9f"},
{source: "f9d2a4af-17e4-4366-b073-e8914b153067", target: "8097df72-2b54-44fb-9826-54d784138f9d"},
{source: "ff0dcd2e-c321-47e1-baff-7e94667badb8", target: "8097df72-2b54-44fb-9826-54d784138f9d"},
{source: "ff0dcd2e-c321-47e1-baff-7e94667badb8", target: "aa9935ab-4cb0-4f0c-a752-69409961c378"},
{source: "67e7e5d5-4c61-43ed-adb1-15c2581fdd59", target: "0008dfb1-5bd0-4d1a-8c2e-e37ce8cb4c0c"},
{source: "6837cfd5-5aa9-456e-97fa-7e660822656e", target: "0008dfb1-5bd0-4d1a-8c2e-e37ce8cb4c0c"},
{source: "72da8af9-b371-4d9d-bbba-4208f20a2985", target: "0008dfb1-5bd0-4d1a-8c2e-e37ce8cb4c0c"},
{source: "596b56e0-74cc-4cab-b7c5-e48a103d3dc8", target: "8a0a8752-0404-43e4-8b2a-1d94cc135478"},
{source: "72da8af9-b371-4d9d-bbba-4208f20a2985", target: "67e7e5d5-4c61-43ed-adb1-15c2581fdd59"},
{source: "ff0dcd2e-c321-47e1-baff-7e94667badb8", target: "f9d2a4af-17e4-4366-b073-e8914b153067"},
{source: "72da8af9-b371-4d9d-bbba-4208f20a2985", target: "6837cfd5-5aa9-456e-97fa-7e660822656e"},
{source: "72da8af9-b371-4d9d-bbba-4208f20a2985", target: "aa9935ab-4cb0-4f0c-a752-69409961c378"},
{source: "0e8caec3-e15d-415e-8748-5ec94dae69cc", target: "2b906404-28d3-41ff-b0fa-08619113a6ec"},
{source: "0e8caec3-e15d-415e-8748-5ec94dae69cc", target: "e7b9df90-afcf-47b8-8ef8-09657a75c866"},
{source: "ddc95d7a-8d9c-4030-8011-8a1989302baa", target: "0e8caec3-e15d-415e-8748-5ec94dae69cc"},
{source: "15994c83-5a4a-44e5-8d78-9719eb0c0f15", target: "08067b65-bc76-4c61-bd2d-1f86adee8c6d"},
{source: "15994c83-5a4a-44e5-8d78-9719eb0c0f15", target: "0ed9a92c-b810-4843-9da4-b61d10f63d6d"},
{source: "15994c83-5a4a-44e5-8d78-9719eb0c0f15", target: "3a7d1068-689d-4262-978b-0a9e9e625abd"},
{source: "15994c83-5a4a-44e5-8d78-9719eb0c0f15", target: "3f34efad-c5ca-4f68-9d72-69825c30b2e8"},
{source: "15994c83-5a4a-44e5-8d78-9719eb0c0f15", target: "73129645-9912-43db-a105-1d358fb91d3c"},
{source: "15994c83-5a4a-44e5-8d78-9719eb0c0f15", target: "8f85c90a-ed8a-4b0e-81d4-968b5a820eaa"},
{source: "15994c83-5a4a-44e5-8d78-9719eb0c0f15", target: "b534ada2-ec21-4e77-8b91-147827846443"},
{source: "15994c83-5a4a-44e5-8d78-9719eb0c0f15", target: "b5ebd1dc-a40a-4c04-b7cc-cd974202b84b"},
{source: "15994c83-5a4a-44e5-8d78-9719eb0c0f15", target: "be119ea2-4755-4d95-931d-e54f40974dd2"},
{source: "15994c83-5a4a-44e5-8d78-9719eb0c0f15", target: "d500ba3b-b122-4a71-99ea-485f16c91e79"},
{source: "15994c83-5a4a-44e5-8d78-9719eb0c0f15", target: "f257c46e-df7c-433e-a6a5-dd52e3f49bbd"},
{source: "c5e652a6-e195-4c8d-9d0a-adc5836a8a63", target: "2b906404-28d3-41ff-b0fa-08619113a6ec"},
{source: "32c4dfaa-2328-4c85-9b4a-c63dfda43e44", target: "0ed9a92c-b810-4843-9da4-b61d10f63d6d"},
{source: "64001045-9122-4189-869f-0e4c78c31a87", target: "32c4dfaa-2328-4c85-9b4a-c63dfda43e44"},
{source: "ddc95d7a-8d9c-4030-8011-8a1989302baa", target: "32c4dfaa-2328-4c85-9b4a-c63dfda43e44"},
{source: "ae83ce5e-76a3-4b13-8bc2-a9984b1dd091", target: "32d65a5e-24ea-473d-9152-ff7bfd9c1ac9"},
{source: "32c4dfaa-2328-4c85-9b4a-c63dfda43e44", target: "7b13f408-a33e-4e0e-ad04-fcc9e136c6c9"},
{source: "32c4dfaa-2328-4c85-9b4a-c63dfda43e44", target: "b534ada2-ec21-4e77-8b91-147827846443"},
{source: "32c4dfaa-2328-4c85-9b4a-c63dfda43e44", target: "be119ea2-4755-4d95-931d-e54f40974dd2"},
{source: "32c4dfaa-2328-4c85-9b4a-c63dfda43e44", target: "c5e652a6-e195-4c8d-9d0a-adc5836a8a63"},
{source: "32c4dfaa-2328-4c85-9b4a-c63dfda43e44", target: "ed3285f0-cff8-46a4-82f4-f1300e641539"},
{source: "32c4dfaa-2328-4c85-9b4a-c63dfda43e44", target: "3a7d1068-689d-4262-978b-0a9e9e625abd"},
{source: "7b13f408-a33e-4e0e-ad04-fcc9e136c6c9", target: "69f838dc-ac17-4649-a2a5-fb93715f1c98"},
{source: "e75280b6-5af4-4d62-b136-cf35be8006ce", target: "69f838dc-ac17-4649-a2a5-fb93715f1c98"},
{source: "ed3285f0-cff8-46a4-82f4-f1300e641539", target: "69f838dc-ac17-4649-a2a5-fb93715f1c98"},
{source: "7b13f408-a33e-4e0e-ad04-fcc9e136c6c9", target: "970c3b15-14f2-40bf-946a-7d145e9688b1"},
{source: "7b13f408-a33e-4e0e-ad04-fcc9e136c6c9", target: "a07a8c1f-bd8b-44c8-968e-3b6ed9d4fd4b"},
{source: "7b13f408-a33e-4e0e-ad04-fcc9e136c6c9", target: "e75280b6-5af4-4d62-b136-cf35be8006ce"},
{source: "970c3b15-14f2-40bf-946a-7d145e9688b1", target: "07174fb0-5802-486c-8b2c-00f1525c7a68"},
{source: "970c3b15-14f2-40bf-946a-7d145e9688b1", target: "d1b275fa-d5da-4379-903e-b235f6804b72"},
{source: "ae83ce5e-76a3-4b13-8bc2-a9984b1dd091", target: "d0eec5e9-fde9-41e8-9b74-745bf9093afd"},
{source: "f0af27e1-6c2b-4aba-b9d0-ae36fd1e906a", target: "ae83ce5e-76a3-4b13-8bc2-a9984b1dd091"},
{source: "c5e652a6-e195-4c8d-9d0a-adc5836a8a63", target: "d1b275fa-d5da-4379-903e-b235f6804b72"},
{source: "e75280b6-5af4-4d62-b136-cf35be8006ce", target: "d1b275fa-d5da-4379-903e-b235f6804b72"},
{source: "44e81a38-1f6f-4aab-bba8-b21d6d6c8927", target: "f094b795-6fcd-4a3a-b826-2898ea12531f"},
{source: "ed3285f0-cff8-46a4-82f4-f1300e641539", target: "e7b9df90-afcf-47b8-8ef8-09657a75c866"},
{source: "3f34efad-c5ca-4f68-9d72-69825c30b2e8", target: "8f85c90a-ed8a-4b0e-81d4-968b5a820eaa"},
{source: "3f34efad-c5ca-4f68-9d72-69825c30b2e8", target: "f094b795-6fcd-4a3a-b826-2898ea12531f"},
{source: "44e81a38-1f6f-4aab-bba8-b21d6d6c8927", target: "46894edb-141b-440c-aae1-209a524a2714"},
{source: "3b19af81-03c5-449a-8b72-231992849064", target: "73129645-9912-43db-a105-1d358fb91d3c"},
{source: "73129645-9912-43db-a105-1d358fb91d3c", target: "8f85c90a-ed8a-4b0e-81d4-968b5a820eaa"},
{source: "7d53de70-4794-4340-800c-1b2cf3e0d4d4", target: "d0eec5e9-fde9-41e8-9b74-745bf9093afd"},
{source: "f0af27e1-6c2b-4aba-b9d0-ae36fd1e906a", target: "7d53de70-4794-4340-800c-1b2cf3e0d4d4"},
{source: "46f0c60d-da51-489d-a17e-c3987776cb4d", target: "8f85c90a-ed8a-4b0e-81d4-968b5a820eaa"},
{source: "79496b1c-4581-4017-9e7a-ea874fecd54f", target: "8f85c90a-ed8a-4b0e-81d4-968b5a820eaa"},
{source: "9aa448c2-f121-4aea-81cd-a9ccbcab0a3f", target: "8f85c90a-ed8a-4b0e-81d4-968b5a820eaa"},
{source: "aa4c5b6a-07b4-405b-add8-22608ce2496f", target: "8f85c90a-ed8a-4b0e-81d4-968b5a820eaa"},
{source: "c496de77-bfd1-4ba9-92cf-643aa232c55d", target: "8f85c90a-ed8a-4b0e-81d4-968b5a820eaa"},
{source: "b5ebd1dc-a40a-4c04-b7cc-cd974202b84b", target: "f094b795-6fcd-4a3a-b826-2898ea12531f"},
{source: "f257c46e-df7c-433e-a6a5-dd52e3f49bbd", target: "f094b795-6fcd-4a3a-b826-2898ea12531f"},
{source: "f0af27e1-6c2b-4aba-b9d0-ae36fd1e906a", target: "0ed9a92c-b810-4843-9da4-b61d10f63d6d"},
{source: "f0af27e1-6c2b-4aba-b9d0-ae36fd1e906a", target: "3a7d1068-689d-4262-978b-0a9e9e625abd"},
{source: "f0af27e1-6c2b-4aba-b9d0-ae36fd1e906a", target: "b534ada2-ec21-4e77-8b91-147827846443"},
{source: "f0af27e1-6c2b-4aba-b9d0-ae36fd1e906a", target: "be119ea2-4755-4d95-931d-e54f40974dd2"},
{source: "f257c46e-df7c-433e-a6a5-dd52e3f49bbd", target: "46894edb-141b-440c-aae1-209a524a2714"},

            ]
        };
        
        let graph = {
            nodes: [],
            links: []
        };
        
        let isolatedComponents = [];
        let showIsolated = false;
        let simulation = null;
        
        function initializeGraph() {
            // Reset graph
            graph.nodes = [];
            graph.links = [];
            isolatedComponents = [];
            
            // Create a map to track referenced components
            const referencedComponents = new Set();
            sampleData.references.forEach(ref => {
                referencedComponents.add(ref.source);
                referencedComponents.add(ref.target);
            });
            
            // Process all components
            sampleData.components.forEach(comp => {
                const node = {
                    id: comp.id,
                    name: comp.name,
                    type: comp.type,
                    path: comp.path,
                    isIsolated: !referencedComponents.has(comp.id),
                    x: undefined,
                    y: undefined,
                    fx: undefined,
                    fy: undefined
                };
                
                if (node.isIsolated) {
                    isolatedComponents.push(node);
                }
                
                graph.nodes.push(node);
            });
            
            // Add all links
            sampleData.references.forEach(ref => {
                graph.links.push({
                    source: ref.source,
                    target: ref.target
                });
            });
            
            // Update the isolated components table
            updateIsolatedTable();
        }
        
        function updateIsolatedTable() {
            const tableBody = document.querySelector("#isolatedTable tbody");
            tableBody.innerHTML = "";
            
            if (isolatedComponents.length === 0) {
                const row = document.createElement("tr");
                row.innerHTML = "<td colspan='3'>No isolated components found.</td>";
                tableBody.appendChild(row);
                return;
            }
            
            isolatedComponents.forEach(comp => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${comp.name}</td>
                    <td>${comp.type}</td>
                    <td>${comp.path}</td>
                `;
                tableBody.appendChild(row);
            });
        }
        
        function initializeDiagram() {
            const width = document.getElementById("diagram").clientWidth;
            const height = document.getElementById("diagram").clientHeight;
            
            // Clear previous SVG if exists
            d3.select("#diagram svg").remove();
            
            // Create SVG
            const svg = d3.select("#diagram")
                .append("svg")
                .attr("width", width)
                .attr("height", height)
                .call(d3.zoom().on("zoom", (event) => {
                    g.attr("transform", event.transform);
                }));
            
            // Define arrowhead marker
            svg.append("defs").append("marker")
                .attr("id", "arrowhead")
                .attr("viewBox", "0 -5 10 10")
                .attr("refX", 20)
                .attr("refY", 0)
                .attr("markerWidth", 6)
                .attr("markerHeight", 6)
                .attr("orient", "auto")
                .append("path")
                .attr("d", "M0,-5L10,0L0,5");
            
            // Create main group for zoom/pan
            const g = svg.append("g");
            
            // Filter nodes based on isolated toggle
            const visibleNodes = showIsolated ? 
                graph.nodes : 
                graph.nodes.filter(d => !d.isIsolated);
            
            // Initial node positioning if not already defined
            positionNodesInitially(visibleNodes, width, height);
            
            // Create simulation with very weak forces (mostly for initialization)
            simulation = d3.forceSimulation(visibleNodes)
                .force("link", d3.forceLink(graph.links)
                    .id(d => d.id)
                    .distance(150)
                    .strength(0.05)) // Very weak link force
                .force("charge", d3.forceManyBody().strength(-50)) // Very weak charge
                .force("center", d3.forceCenter(width / 2, height / 2).strength(0.05)) // Very weak centering
                .force("collision", d3.forceCollide(70).strength(0.2)); // Weak collision
            
            // Immediately stop simulation after initial layout
            simulation.stop();
            
            // Run simulation for 300 iterations and then stop (just to get initial positioning)
            simulation.tick(300);
            
            // Draw links
            const link = g.append("g")
                .selectAll("path")
                .data(graph.links)
                .enter()
                .append("path")
                .attr("class", "link");
            
            // Draw nodes
            const node = g.append("g")
                .selectAll(".node")
                .data(visibleNodes)
                .enter()
                .append("g")
                .attr("class", d => d.isIsolated ? "node isolated-node" : "node")
                .attr("transform", d => `translate(${d.x}, ${d.y})`)
                .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    .on("end", dragended));
            
            node.append("rect")
                .attr("width", d => Math.max(d.name.length * 8, 100))
                .attr("height", 40)
                .attr("x", d => -(Math.max(d.name.length * 8, 100) / 2))
                .attr("y", -20)
                .attr("rx", 5)
                .attr("ry", 5)
                .attr("fill", d => {
                    switch (d.type) {
                        case "process": return "#a5d6a7"; // Green
                        case "connector-settings": return "#90caf9"; // Light Blue
                        case "connector-action": return "#ffcc80"; //Light Yellow
                        default: return "#ffffff";
                    }
                });
            
            node.append("text")
                .text(d => d.name)
                .attr("font-size", "12px");
            
            // Add click event for component details
            node.on("click", function(event, d) {
                if (!event.defaultPrevented) { // Only if not dragging
                    event.stopPropagation();
                    showComponentDetails(d);
                }
            });
            
            // Function to update link positions
            function updateLinks() {
                link.attr("d", d => {
                    const sourceNode = visibleNodes.find(n => n.id === (typeof d.source === 'object' ? d.source.id : d.source));
                    const targetNode = visibleNodes.find(n => n.id === (typeof d.target === 'object' ? d.target.id : d.target));
                    
                    if (!sourceNode || !targetNode) return "";
                    
                    const sourceWidth = Math.max(sourceNode.name.length * 8, 100) / 2;
                    const targetWidth = Math.max(targetNode.name.length * 8, 100) / 2;
                    
                    const dx = targetNode.x - sourceNode.x;
                    const dy = targetNode.y - sourceNode.y;
                    const angle = Math.atan2(dy, dx);
                    
                    const sourceX = sourceNode.x + sourceWidth * Math.cos(angle);
                    const sourceY = sourceNode.y + 20 * Math.sin(angle);
                    const targetX = targetNode.x - targetWidth * Math.cos(angle);
                    const targetY = targetNode.y - 20 * Math.sin(angle);
                    
                    return `M${sourceX},${sourceY} L${targetX},${targetY}`;
                });
            }
            
            // Initial link update
            updateLinks();
            
            function dragstarted(event, d) {
                d3.select(this).raise();
                event.sourceEvent.stopPropagation();
            }
            
            function dragged(event, d) {
                // Update node position directly
                d.x = event.x;
                d.y = event.y;
                
                // Fix position while dragging
                d.fx = event.x;
                d.fy = event.y;
                
                // Update this nodes position
                d3.select(this).attr("transform", `translate(${d.x}, ${d.y})`);
                
                // Update links
                updateLinks();
            }
            
            function dragended(event, d) {
                // Keep position fixed after drag
                d.fx = d.x;
                d.fy = d.y;
            }
            
            // Search functionality
            document.getElementById("searchInput").addEventListener("input", function() {
                const searchTerm = this.value.toLowerCase();
                
                if (searchTerm === "") {
                    node.style("opacity", 1);
                    link.style("opacity", 1);
                    return;
                }
                
                node.style("opacity", d => {
                    return d.name.toLowerCase().includes(searchTerm) ? 1 : 0.2;
                });
                
                link.style("opacity", 0.2);
            });
            
            // Add auto-arrange functionality
            document.getElementById("applyForceLayoutBtn").addEventListener("click", function() {
                // Clear fixed positions
                visibleNodes.forEach(node => {
                    node.fx = null;
                    node.fy = null;
                });
                
                // Reset simulation with stronger forces
                simulation.alpha(1).restart();
                simulation.force("link").strength(0.5);
                simulation.force("charge").strength(-300);
                simulation.force("center").strength(0.1);
                
                // Update on tick
                simulation.on("tick", () => {
                    node.attr("transform", d => `translate(${d.x}, ${d.y})`);
                    updateLinks();
                });
                
                // After some iterations, stop and fix positions
                setTimeout(() => {
                    simulation.stop();
                    // Fix all node positions
                    visibleNodes.forEach(node => {
                        node.fx = node.x;
                        node.fy = node.y;
                    });
                }, 2000);
            });
            
            // Circle layout
            document.getElementById("applyCircleLayoutBtn").addEventListener("click", function() {
                const radius = Math.min(width, height) / 3;
                const centerX = width / 2;
                const centerY = height / 2;
                
                visibleNodes.forEach((node, i) => {
                    const angle = (i / visibleNodes.length) * 2 * Math.PI;
                    node.x = centerX + radius * Math.cos(angle);
                    node.y = centerY + radius * Math.sin(angle);
                    node.fx = node.x;
                    node.fy = node.y;
                    
                    d3.select(node.el)
                        .transition()
                        .duration(800)
                        .attr("transform", `translate(${node.x}, ${node.y})`);
                });
                
                // Update node positions with animation
                node.transition()
                    .duration(800)
                    .attr("transform", d => `translate(${d.x}, ${d.y})`);
                
                // Update links after animation
                setTimeout(() => {
                    updateLinks();
                }, 800);
            });
            
            // Hierarchical layout
            document.getElementById("applyHierarchicalLayoutBtn").addEventListener("click", function() {
                // Find root nodes (those that are not targets of any link)
                const allTargets = new Set(graph.links.map(link => 
                    typeof link.target === 'object' ? link.target.id : link.target
                ));
                
                const rootNodeIds = visibleNodes
                    .filter(node => !allTargets.has(node.id))
                    .map(node => node.id);
                
                // If no root nodes, use isolated components or just the first node
                if (rootNodeIds.length === 0) {
                    if (isolatedComponents.length > 0) {
                        rootNodeIds.push(isolatedComponents[0].id);
                    } else {
                        rootNodeIds.push(visibleNodes[0].id);
                    }
                }
                
                // Build hierarchical levels
                const levels = buildHierarchicalLevels(rootNodeIds);
                
                // Position nodes by level
                const levelHeight = height / (levels.length + 1);
                
                levels.forEach((level, i) => {
                    const levelY = levelHeight * (i + 1);
                    const nodeWidth = width / (level.length + 1);
                    
                    level.forEach((nodeId, j) => {
                        const node = visibleNodes.find(n => n.id === nodeId);
                        if (node) {
                            node.x = nodeWidth * (j + 1);
                            node.y = levelY;
                            node.fx = node.x;
                            node.fy = node.y;
                        }
                    });
                });
                
                // Position any remaining nodes at the bottom
                const placedNodes = new Set();
                levels.forEach(level => level.forEach(id => placedNodes.add(id)));
                
                const unplacedNodes = visibleNodes.filter(node => !placedNodes.has(node.id));
                if (unplacedNodes.length > 0) {
                    const bottomY = levelHeight * (levels.length + 1);
                    const nodeWidth = width / (unplacedNodes.length + 1);
                    
                    unplacedNodes.forEach((node, i) => {
                        node.x = nodeWidth * (i + 1);
                        node.y = bottomY;
                        node.fx = node.x;
                        node.fy = node.y;
                    });
                }
                
                // Update node positions with animation
                node.transition()
                    .duration(800)
                    .attr("transform", d => `translate(${d.x}, ${d.y})`);
                
                // Update links after animation
                setTimeout(() => {
                    updateLinks();
                }, 800);
            });
            
            // Helper function to build hierarchical levels
            function buildHierarchicalLevels(rootNodeIds) {
                const levels = [rootNodeIds];
                const visited = new Set(rootNodeIds);
                let currentLevel = rootNodeIds;
                let hasNewNodes = true;
                
                while (hasNewNodes) {
                    const nextLevel = [];
                    hasNewNodes = false;
                    
                    for (const nodeId of currentLevel) {
                        // Find all targets from this node
                        const targets = graph.links
                            .filter(link => {
                                const sourceId = typeof link.source === 'object' ? link.source.id : link.source;
                                return sourceId === nodeId;
                            })
                            .map(link => typeof link.target === 'object' ? link.target.id : link.target);
                        
                        // Add unvisited targets to next level
                        for (const targetId of targets) {
                            if (!visited.has(targetId)) {
                                nextLevel.push(targetId);
                                visited.add(targetId);
                                hasNewNodes = true;
                            }
                        }
                    }
                    
                    if (nextLevel.length > 0) {
                        levels.push(nextLevel);
                        currentLevel = nextLevel;
                    }
                }
                
                return levels;
            }
            
            // Store DOM element reference for each node
            node.each(function(d) {
                d.el = this;
            });


            // Apply Hierarchical Layout by default
			document.getElementById("applyHierarchicalLayoutBtn").click();
            
            return { svg, link, node, updateLinks };
        }
        
        function positionNodesInitially(nodes, width, height) {
            // Only set initial positions for nodes that dont have positions yet
            nodes.forEach((node, i) => {
                if (typeof node.x === 'undefined' || typeof node.y === 'undefined') {
                    // Distribute nodes in a grid pattern
                    const cols = Math.ceil(Math.sqrt(nodes.length));
                    const rows = Math.ceil(nodes.length / cols);
                    
                    const colWidth = width / cols;
                    const rowHeight = height / rows;
                    
                    const col = i % cols;
                    const row = Math.floor(i / cols);
                    
                    node.x = colWidth * (col + 0.5);
                    node.y = rowHeight * (row + 0.5);
                }
            });
        }
        
        function showComponentDetails(component) {
            const modal = document.getElementById("componentModal");
            const modalTitle = document.getElementById("modalTitle");
            const modalContent = document.getElementById("modalContent");
            
            modalTitle.textContent = component.name;
            
            // Find incoming and outgoing references
            const incoming = graph.links.filter(link => {
                const targetId = typeof link.target === 'object' ? link.target.id : link.target;
                return targetId === component.id;
            });
            
            const outgoing = graph.links.filter(link => {
                const sourceId = typeof link.source === 'object' ? link.source.id : link.source;
                return sourceId === component.id;
            });
            
            const incomingNames = incoming.map(link => {
                const sourceId = typeof link.source === 'object' ? link.source.id : link.source;
                const sourceNode = graph.nodes.find(n => n.id === sourceId);
                return sourceNode ? sourceNode.name : 'Unknown';
            });
            
            const outgoingNames = outgoing.map(link => {
                const targetId = typeof link.target === 'object' ? link.target.id : link.target;
                const targetNode = graph.nodes.find(n => n.id === targetId);
                return targetNode ? targetNode.name : 'Unknown';
            });
            
            modalContent.innerHTML = `
                <p><strong>Type:</strong> ${component.type}</p>
                <p><strong>Path:</strong> ${component.path}</p>
                <p><strong>References From:</strong> ${incomingNames.length ? incomingNames.join(", ") : "None"}</p>
                <p><strong>References To:</strong> ${outgoingNames.length ? outgoingNames.join(", ") : "None"}</p>
            `;
            
            modal.style.display = "block";
        }
        
        // Event listeners
        document.addEventListener("DOMContentLoaded", function() {
            // Initialize graph with sample data
            initializeGraph();
            const diagramElements = initializeDiagram();
            
            // Reset view button
            document.getElementById("resetBtn").addEventListener("click", function() {
                // Remove fixed positions
                graph.nodes.forEach(node => {
                    node.x = undefined;
                    node.y = undefined;
                    node.fx = undefined;
                    node.fy = undefined;
                });
                initializeDiagram();
            });
			
			
			// Apply Hierarchical Layout by default
			document.getElementById("applyHierarchicalLayoutBtn").click();
            
            // Toggle isolated components
            document.getElementById("toggleIsolatedBtn").addEventListener("click", function() {
                showIsolated = !showIsolated;
                initializeDiagram();
            });
            
            // Modal close button
            document.querySelector(".close").addEventListener("click", function() {
                document.getElementById("componentModal").style.display = "none";
            });
            
            // Click outside to close modal
            window.addEventListener("click", function(event) {
                const modal = document.getElementById("componentModal");
                if (event.target === modal) {
                    modal.style.display = "none";
                }
            });
            
            // Import button trigger
            document.getElementById("importBtnTrigger").addEventListener("click", function() {
                document.getElementById("fileInput").click();
            });
            
            // Import data
            document.getElementById("fileInput").addEventListener("change", function(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        sampleData = JSON.parse(e.target.result);
                        initializeGraph();
                        initializeDiagram();
                        alert("Data imported successfully!");
                    } catch (error) {
                        alert("Error importing data: " + error.message);
                    }
                };
                reader.readAsText(file);
            });
            
            // Export data
            document.getElementById("exportDataBtn").addEventListener("click", function() {
                const dataStr = JSON.stringify(sampleData, null, 2);
                const blob = new Blob([dataStr], {type: "application/json"});
                const url = URL.createObjectURL(blob);
                
                const link = document.createElement("a");
                link.href = url;
                link.download = "boomi-component-data.json";
                link.click();
                
                URL.revokeObjectURL(url);
            });
        });
    </script>
</body>
</html>